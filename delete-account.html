<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Delete Account ‚Äì CIZA GROUP</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,system-ui;
  background:linear-gradient(180deg,#071733,#0a2a5e);
  color:#fff;
}
.container{
  max-width:420px;
  margin:80px auto;
  padding:24px;
  border-radius:18px;
  border:2px solid #f2b840;
  background:rgba(255,255,255,0.08);
}
h1{
  text-align:center;
  color:#f2b840;
}
p{
  line-height:1.6;
  text-align:center;
}
button{
  width:100%;
  padding:16px;
  margin-top:16px;
  border-radius:14px;
  border:none;
  font-size:16px;
  font-weight:600;
  cursor:pointer;
}
.delete{
  background:#e53935;
  color:#fff;
}
.cancel{
  background:#ffffff22;
  color:#fff;
}
</style>

<!-- Firebase Web SDK -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, onAuthStateChanged, deleteUser } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

/* ================================
   üî• FIREBASE CONFIG (√Ä REMPLACER)
================================ */
const firebaseConfig = {
  apiKey: "API_KEY",
  authDomain: "PROJECT_ID.firebaseapp.com",
  projectId: "PROJECT_ID"
};
/* ================================ */

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

let currentUser = null;

onAuthStateChanged(auth, (user) => {
  if (!user) {
    alert("Session expir√©e. Veuillez vous reconnecter.");
    window.location.href = "ciza://account-deleted";
    return;
  }
  currentUser = user;
});

window.deleteAccount = async function(){
  if(!currentUser){
    alert("Utilisateur non connect√©");
    return;
  }

  const ok = confirm(
    "Cette action supprimera d√©finitivement votre compte CIZA GROUP.\n\nVoulez-vous continuer ?"
  );
  if(!ok) return;

  try{
    await deleteUser(currentUser);   // üî• SUPPRESSION D√âFINITIVE
    window.location.href = "ciza://account-deleted";
  }catch(e){
    alert(
      "Pour des raisons de s√©curit√©, veuillez vous reconnecter puis r√©essayer."
    );
  }
};

window.cancelDelete = function(){
  window.history.back();
};
</script>
</head>

<body>

<div class="container">
  <h1>Supprimer le compte</h1>

  <p>
    Cette action est <strong>d√©finitive</strong>.<br>
    Votre compte sera supprim√© et ne pourra plus √™tre utilis√©.
  </p>

  <button class="delete" onclick="deleteAccount()">
    Supprimer d√©finitivement mon compte
  </button>

  <button class="cancel" onclick="cancelDelete()">
    Annuler
  </button>
</div>

</body>
</html>
