<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>CIZA GROUP — Réinitialisation</title>
<link rel="icon" href="logotransparent.png">

<style>
body{
    margin:0;
    background:#06142e;
    font-family:Arial, sans-serif;
    color:white;
}
.container{
    max-width:380px;
    margin:120px auto;
    background:#0b1c34cc;
    padding:30px;
    border-radius:18px;
    border:1px solid #12335c;
    box-shadow:0 0 18px #00000040;
}
h2{
    text-align:center;
    color:#F2B840;
    margin-top:0;
}
p{text-align:center;opacity:.8;}

input{
    width:100%;
    padding:14px;
    margin:10px 0;
    border:none;
    border-radius:10px;
    background:#112544;
    color:white;
}
button{
    width:100%;
    padding:14px;
    background:#F2B840;
    color:#06142e;
    border:none;
    border-radius:10px;
    font-size:16px;
    font-weight:bold;
    cursor:pointer;
    margin-top:10px;
}
button:hover{ background:#c99933; }

.error-box{
    background:#ff444466;
    padding:10px;
    border-left:4px solid #ff1a1a;
    margin-bottom:10px;
    display:none;
    border-radius:6px;
}
.success-box{
    background:#22bb4466;
    padding:10px;
    border-left:4px solid #11aa33;
    margin-bottom:10px;
    display:none;
    border-radius:6px;
}

.back-link{
    margin-top:18px;
    text-align:center;
}
.back-link a{
    color:#F2B840;
    text-decoration:none;
}
.back-link a:hover{ text-decoration:underline; }
</style>
</head>

<body>

<div class="container">
    <h2>Réinitialiser le mot de passe</h2>
    <p>Entrez votre email et vous recevrez un lien sécurisé.</p>

    <div id="error" class="error-box"></div>
    <div id="success" class="success-box"></div>

    <input type="email" id="email" placeholder="Votre email" required>

    <button onclick="resetPassword()">Envoyer le lien</button>

    <div class="back-link">
        <a href="login.html">⬅ Retour à la connexion</a>
    </div>
</div>

<!-- FIREBASE -->
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getAuth, sendPasswordResetEmail }
       from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

    const firebaseConfig = {
        apiKey: "AIzaSyBAiJHbBvRO6cDFpm6C-5mQk6SiTtzcI8o",
        authDomain: "cizagroup-app.firebaseapp.com",
        projectId: "cizagroup-app",
        storageBucket: "cizagroup-app.firebasestorage.app",
        messagingSenderId: "930936264084",
        appId: "1:930936264084:web:5395360e54bf17bf492b81"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    window.resetPassword = function(){
        const email = document.getElementById("email").value.trim();
        const errorBox = document.getElementById("error");
        const successBox = document.getElementById("success");

        errorBox.style.display = "none";
        successBox.style.display = "none";

        if(email === ""){
            errorBox.innerHTML = "Veuillez entrer votre email.";
            errorBox.style.display = "block";
            return;
        }

        sendPasswordResetEmail(auth, email)
        .then(()=>{
            successBox.innerHTML = "Un lien vous a été envoyé. Vérifiez votre email.";
            successBox.style.display = "block";

            setTimeout(()=>{
                window.location.href = "login.html";
            },2000);
        })
        .catch((err)=>{
            let message = "Erreur inconnue";

            if(err.code === "auth/user-not-found") message = "Aucun compte associé à cet email.";
            if(err.code === "auth/invalid-email") message = "Email invalide.";

            errorBox.innerHTML = message;
            errorBox.style.display = "block";
        });
    }
</script>

</body>
</html>
