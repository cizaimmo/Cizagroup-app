<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Dashboard — CIZA GROUP App</title>

<style>
body{
    margin:0;
    background:#06142E;
    font-family:Arial, sans-serif;
    color:white;
}

/* HEADER */
header{
    background:#06142E;
    padding:18px;
    text-align:center;
    border-bottom:2px solid #F2B840;
}
header h2{
    margin:0;
    color:#F2B840;
    font-size:22px;
}

/* USER BOX */
.user-box{
    text-align:center;
    padding:25px 10px;
}
.avatar{
    width:80px;height:80px;
    background:#F2B840;
    border-radius:50%;
    display:flex;
    justify-content:center;
    align-items:center;
    color:#06142E;
    font-weight:bold;
    font-size:28px;
    margin:auto;
}
.user-box h3{
    margin-top:12px;
    font-size:20px;
}

/* GRID */
.grid{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
    gap:15px;
    padding:20px;
}
.card{
    background:#0B1C34;
    padding:20px;
    border-radius:12px;
    text-align:center;
    border:1px solid #12335C;
    transition:.3s;
}
.card:hover{
    transform:translateY(-5px);
    border-color:#F2B840;
}
.card h4{
    color:#F2B840;
}

/* LOGOUT */
.logout{
    width:90%;
    margin:25px auto;
    padding:12px;
    background:#D9534F;
    border:none;
    color:white;
    font-weight:bold;
    border-radius:8px;
    cursor:pointer;
}
.logout:hover{background:#b63c38;}
</style>
</head>

<body>

<header>
    <h2>CIZA GROUP — App</h2>
</header>

<div class="user-box">
    <div class="avatar" id="avatar">?</div>
    <h3 id="welcome">Bienvenue</h3>
</div>

<div class="grid">
    <div class="card" onclick="go('carwash.html')">
        <h4>CizaCarWash+</h4>
        <p>Lavage & abonnement</p>
    </div>

    <div class="card" onclick="go('delivery.html')">
        <h4>CizaDelivery</h4>
        <p>Livraison express</p>
    </div>

    <div class="card" onclick="go('assist.html')">
        <h4>CizaAssist</h4>
        <p>Assistance & missions</p>
    </div>

    <div class="card" onclick="go('market.html')">
        <h4>CizaMarket</h4>
        <p>Achats & packs diaspora</p>
    </div>

    <div class="card" onclick="go('jobs.html')">
        <h4>CizaJobs</h4>
        <p>Emploi & recrutement</p>
    </div>
</div>

<button class="logout" onclick="logoutUser()">Déconnexion</button>

<script type="module">
import { 
    getAuth, 
    onAuthStateChanged, 
    signOut 
} from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";

/* FIREBASE */
const firebaseConfig = {
    apiKey: "AIzaSyBAiJHbBvRO6cDFpm6C-5mQk6SiTtzcI8o",
    authDomain: "cizagroup-app.firebaseapp.com",
    projectId: "cizagroup-app",
    storageBucket: "cizagroup-app.firebasestorage.app",
    messagingSenderId: "930936264084",
    appId: "1:930936264084:web:5395360e54bf17bf492b81",
    measurementId: "G-1KX6EN1KST"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

/* AUTH CHECK */
onAuthStateChanged(auth, user=>{
    if(!user){
        window.location.href = "index.html";
        return;
    }

    let email = user.email;
    let initial = email.charAt(0).toUpperCase();

    document.getElementById("avatar").innerHTML = initial;
    document.getElementById("welcome").innerHTML = "Bienvenue, " + email;
});

/* LOGOUT */
window.logoutUser = function(){
    signOut(auth).then(()=>{
        window.location.href = "index.html";
    });
};

/* OPEN PAGES */
window.go = function(page){
    window.location.href = page;
};
</script>

</body>
</html>
