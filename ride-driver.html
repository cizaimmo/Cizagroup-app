<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>CizaRide+ Chauffeur</title>
<link rel="icon" href="logotransparent.png">

<!-- Leaflet -->
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<style>
body{
    margin:0;
    background:#06142E;
    color:white;
    font-family:Arial, sans-serif;
}

/* HEADER */
header{
    padding:18px;
    text-align:center;
    border-bottom:2px solid #F2B840;
}
header h1{
    margin:0;
    font-size:22px;
    color:#F2B840;
}

/* MAP */
#map{
    width:100%;
    height:350px;
    margin-top:12px;
    border-radius:12px;
    box-shadow:0 0 8px #00000066;
}

/* STATUS */
.status-box{
    padding:16px;
    text-align:center;
}
.status-box select{
    width:100%;
    padding:14px;
    background:#112544;
    border:none;
    border-radius:10px;
    color:white;
    font-weight:bold;
}

/* BUTTON */
.button{
    width:100%;
    padding:14px;
    border:none;
    border-radius:10px;
    background:#F2B840;
    color:#06142E;
    font-weight:bold;
    margin-top:14px;
    cursor:pointer;
}
.button:hover{
    background:#d4a038;
}

/* POPUP COURSE */
.popup{
    display:none;
    position:fixed;
    top:0;left:0;width:100%;height:100%;
    background:#000000AA;
    backdrop-filter:blur(6px);
    justify-content:center;
    align-items:center;
    z-index:9999;
}
.popup-content{
    background:#0B1C34;
    padding:25px;
    width:85%;
    max-width:330px;
    border-radius:14px;
    text-align:center;
    border:1px solid #12335c;
}
.popup-content h2{
    color:#F2B840;
}
.popup-content button{
    background:#F2B840;
    border:none;
    padding:12px 18px;
    border-radius:8px;
    color:#06142E;
    font-weight:bold;
    margin-top:12px;
    cursor:pointer;
}
</style>
</head>

<body>

<header>
    <h1>CizaRide+ Chauffeur</h1>
</header>

<div id="map"></div>

<div class="status-box">
    <h3>Statut du chauffeur</h3>
    <select id="driver-status">
        <option value="offline">ðŸ”´ Hors ligne</option>
        <option value="available">ðŸŸ¢ Disponible</option>
        <option value="busy">ðŸŸ¡ OccupÃ©</option>
    </select>

    <button class="button" onclick="simulateRide()">Simuler une course (test)</button>
</div>

<!-- POPUP COURSE -->
<div id="popup" class="popup">
    <div class="popup-content">
        <h2>Nouvelle course ðŸš•</h2>
        <p><b>Client :</b> Poste de police â€” Bujumbura</p>
        <p><b>Destination :</b> Rohero</p>

        <button onclick="acceptRide()">Accepter</button>
        <button onclick="closePopup()">Refuser</button>
    </div>
</div>

<script>
// MAP
let map = L.map('map').setView([-3.38, 29.36], 13);
L.tileLayer('https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png', {
    attribution: 'Â© OpenStreetMap'
}).addTo(map);

let driverMarker;

// GEOLOCATION
if(navigator.geolocation){
    navigator.geolocation.watchPosition(pos=>{
        let lat = pos.coords.latitude;
        let lon = pos.coords.longitude;

        if(!driverMarker){
            driverMarker = L.marker([lat, lon]).addTo(map)
                .bindPopup("Vous Ãªtes ici (chauffeur)");
            map.setView([lat, lon], 15);
        } else {
            driverMarker.setLatLng([lat, lon]);
        }
    });
}

// SIMULATE RIDE
function simulateRide(){
    openPopup();
}

// RIDE ACCEPTED
function acceptRide(){
    alert("Course acceptÃ©e âœ”");
    closePopup();
}

// POPUP CONTROL
function openPopup(){
    document.getElementById("popup").style.display="flex";
}
function closePopup(){
    document.getElementById("popup").style.display="none";
}
</script>

</body>
</html>
